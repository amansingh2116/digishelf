{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="book-detail-container">
    <div class="book-media">
        <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="detail-cover">
        {% if book.demo_pages %}
        <a href="{{ book.demo_pages.url }}" class="demo-button" target="_blank">
            Download Sample ({{ book.demo_pages.size|filesizeformat }})
        </a>
        {% endif %}
    </div>
    
    <div class="book-info">
        <h1>{{ book.title }}</h1>
        <p class="author">by {{ book.author }}</p>
        <div class="meta-info">
            <span class="price">â‚¹{{ book.price }}</span>
            <span class="upload-date">Uploaded: {{ book.created_at|date:"M d, Y" }}</span>
        </div>
        
        <div class="description">
            <h3>Description</h3>
            <p>{{ book.description }}</p>
        </div>

        <div class="genres-section">
            {% for genre in book.genres.all %}
            <span class="genre-tag">{{ genre.name }}</span>
            {% endfor %}
        </div>
        
        <div class="actions">
            <a href="{{ book.razorpay_link }}" class="purchase-btn" target="_blank">
                Purchase Now
            </a>
            <form action="{% url 'add_to_cart' book.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="cart-btn">Add to Cart</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}